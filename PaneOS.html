<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>PaneOS ‚Äì Sky Blue Edition v1.2</title>
  <style>
    * {
      box-sizing: border-box;
      user-select: none;
    }

    body {
      margin: 0;
      font-family: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background:
        linear-gradient(to top, #4ade80 0, #22c55e 18%, #22c55e 24%, #38bdf8 58%, #0ea5e9 100%);
      height: 100vh;
      overflow: hidden;
      color: #111827;
    }

    /* Hills */

    .hill-layer {
      position: fixed;
      width: 140%;
      height: 40vh;
      left: -20%;
      bottom: 0;
      pointer-events: none;
      border-radius: 50% 50% 0 0;
    }

    .hill-back {
      background: radial-gradient(circle at top, #16a34a, #166534);
      bottom: -8vh;
    }

    .hill-front {
      background: radial-gradient(circle at top, #22c55e, #15803d);
      bottom: -14vh;
    }

    .desktop-overlay {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at top left, rgba(191, 219, 254, 0.3), transparent 55%),
        radial-gradient(circle at bottom right, rgba(34, 197, 94, 0.25), transparent 60%);
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .desktop {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }

    /* Boot screen */

    #bootScreen {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at center, #0b1120 0, #020617 60%, #000 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      color: #e5e7eb;
    }

    .boot-logo {
      width: 180px;
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      transform: skewX(-8deg);
    }

    .boot-logo-grid {
      width: 120px;
      height: 80px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 3px;
    }

    .boot-pane {
      border-radius: 10px;
      box-shadow:
        0 0 22px rgba(59, 130, 246, 0.8),
        inset 0 0 6px rgba(15, 23, 42, 0.8);
    }

    .boot-pane.tl { background: radial-gradient(circle at top left, #7c3aed, #2563eb); }
    .boot-pane.tr { background: radial-gradient(circle at top left, #2563eb, #22c55e); }
    .boot-pane.bl { background: radial-gradient(circle at top left, #22c55e, #0ea5e9); }
    .boot-pane.br { background: radial-gradient(circle at top left, #ec4899, #6366f1); }

    .boot-title {
      margin-top: 24px;
      font-size: 28px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #e5e7eb;
      text-shadow:
        0 0 12px rgba(15, 23, 42, 0.9),
        0 0 28px rgba(37, 99, 235, 0.9);
    }

    .boot-sub {
      margin-top: 6px;
      font-size: 12px;
      opacity: 0.7;
    }

    .boot-sub2 {
      margin-top: 4px;
      font-size: 11px;
      opacity: 0.6;
    }

    .boot-progress {
      margin-top: 32px;
      width: 220px;
      height: 4px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      overflow: hidden;
      box-shadow: 0 0 18px rgba(37, 99, 235, 0.6);
    }

    .boot-progress-bar {
      width: 40%;
      height: 100%;
      background: linear-gradient(90deg, #60a5fa, #22c55e);
      animation: bootSlide 1.1s infinite alternate;
    }

    @keyframes bootSlide {
      from { transform: translateX(-20%); }
      to   { transform: translateX(90%); }
    }

    /* Desktop icons on left side */

    .icon-column {
      position: absolute;
      top: 40px;
      left: 16px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      z-index: 200;
    }

    .desktop-icon {
      width: 72px;
      text-align: center;
      color: #e5e7eb;
      cursor: pointer;
      font-size: 12px;
    }

    .desktop-icon-inner {
      width: 52px;
      height: 52px;
      margin: 0 auto 4px;
      border-radius: 12px;
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.9), rgba(37, 99, 235, 0.9));
      border: 1px solid rgba(148, 163, 184, 0.9);
      box-shadow:
        0 6px 16px rgba(15, 23, 42, 0.9),
        inset 0 0 6px rgba(15, 23, 42, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .desktop-icon span {
      text-shadow: 0 0 4px rgba(15, 23, 42, 0.9);
    }

    /* Taskbar */

    .taskbar {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      height: 44px;
      background: linear-gradient(to top, #1e3a8a, #2563eb);
      border-top: 1px solid #1d4ed8;
      display: flex;
      align-items: center;
      padding: 0 8px;
      box-shadow: 0 -6px 20px rgba(0, 0, 0, 0.9);
      z-index: 1000;
    }

    .start-button {
      width: 46px;
      height: 42px;
      border-radius: 6px;
      padding: 4px;
      background: radial-gradient(circle at top left, #93c5fd, #2563eb);
      box-shadow:
        0 0 10px rgba(59, 130, 246, 0.8),
        0 2px 6px rgba(15, 23, 42, 0.9);
      border: 1px solid #1d4ed8;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .start-button:active {
      transform: translateY(1px);
      box-shadow:
        0 0 6px rgba(59, 130, 246, 0.8),
        0 1px 4px rgba(15, 23, 42, 0.9);
    }

    .start-logo {
      width: 28px;
      height: 20px;
      transform: skewX(-8deg);
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 2px;
    }

    .start-pane {
      border-radius: 5px;
      box-shadow: inset 0 0 3px rgba(15, 23, 42, 0.7);
    }

    .start-pane.tl { background: radial-gradient(circle at top left, #7c3aed, #2563eb); }
    .start-pane.tr { background: radial-gradient(circle at top left, #2563eb, #22c55e); }
    .start-pane.bl { background: radial-gradient(circle at top left, #22c55e, #0ea5e9); }
    .start-pane.br { background: radial-gradient(circle at top left, #ec4899, #6366f1); }

    .taskbar-info {
      margin-left: 10px;
      font-size: 11px;
      color: #e5e7eb;
      text-shadow: 0 1px 2px rgba(15, 23, 42, 0.9);
    }

    /* Start menu */

    .start-menu {
      position: fixed;
      left: 8px;
      bottom: 52px;
      width: 260px;
      height: 320px;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background:
        linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(30, 64, 175, 0.95));
      backdrop-filter: blur(18px);
      box-shadow:
        0 20px 50px rgba(0, 0, 0, 0.9),
        0 0 30px rgba(37, 99, 235, 0.6);
      padding: 8px;
      display: none;
      flex-direction: column;
      z-index: 1100;
      color: #e5e7eb;
      font-size: 13px;
    }

    .start-header {
      padding: 6px 8px;
      border-radius: 8px;
      background: linear-gradient(135deg, #60a5fa, #2563eb);
      color: #f9fafb;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .start-items {
      flex: 1;
      overflow: hidden auto;
      padding: 2px 0;
    }

    .start-item {
      padding: 5px 8px;
      border-radius: 6px;
      font-size: 13px;
      display: flex;
      align-items: center;
      cursor: pointer;
      margin-bottom: 3px;
    }

    .start-item-icon {
      width: 20px;
      height: 20px;
      margin-right: 8px;
      border-radius: 4px;
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.9), rgba(37, 99, 235, 0.9));
      border: 1px solid rgba(148, 163, 184, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    .start-item:hover {
      background: radial-gradient(circle at left, rgba(59, 130, 246, 0.35), transparent 60%);
    }

    .start-footer {
      margin-top: 4px;
      padding-top: 4px;
      border-top: 1px solid rgba(51, 65, 85, 0.95);
      font-size: 11px;
      display: flex;
      justify-content: space-between;
      opacity: 0.8;
    }

    /* Windows */

    .window {
      position: absolute;
      width: 520px;
      height: 420px;
      border-radius: 8px;
      border: 1px solid #7da2d7;
      background: #e9f1fb;
      box-shadow:
        0 18px 40px rgba(15, 23, 42, 0.95),
        0 0 16px rgba(59, 130, 246, 0.7);
      display: none;
      flex-direction: column;
      overflow: hidden;
      z-index: 500;
    }

    .window-header {
      height: 28px;
      background: linear-gradient(to bottom, #5fa9f5, #3176cf);
      border-bottom: 1px solid #255ba4;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 8px;
      cursor: grab;
      color: #ffffff;
      font-size: 12px;
    }

    .window-header-title {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .window-controls {
      display: flex;
      gap: 2px;
    }

    .window-btn {
      width: 26px;
      height: 18px;
      border-radius: 2px;
      border: 1px solid #255ba4;
      background: linear-gradient(to bottom, #f3f7fb, #d7e4f5);
      color: #1f2933;
      font-size: 11px;
      line-height: 16px;
      text-align: center;
      cursor: pointer;
    }

    .window-btn:hover {
      background: linear-gradient(to bottom, #ffffff, #e4edf9);
    }

    .window-btn-close {
      background: linear-gradient(to bottom, #f76b6b, #d73737);
      color: #ffffff;
      border-color: #9b2525;
    }

    .window-btn-close:hover {
      background: linear-gradient(to bottom, #ff8b8b, #e04545);
    }

    .window-content {
      flex: 1;
      padding: 10px;
      font-size: 13px;
      color: #111827;
      background: #ffffff;
      overflow: auto;
    }

    /* Notes */

    #notesArea {
      width: 100%;
      height: 100%;
      resize: none;
      border-radius: 4px;
      border: 1px solid #cbd5e1;
      background: #ffffff;
      color: #111827;
      padding: 8px;
      font-family: "Consolas", ui-monospace, monospace;
      font-size: 13px;
      outline: none;
      box-shadow: inset 0 0 4px rgba(148, 163, 184, 0.8);
    }

    /* Edge browser + logo */

    .edge-logo {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      position: relative;
      overflow: hidden;
      box-shadow: 0 0 4px rgba(15, 23, 42, 0.9);
    }

    .edge-logo-base {
      position: absolute;
      inset: 0;
      background: conic-gradient(
        from 210deg,
        #22c55e,
        #0ea5e9,
        #2563eb,
        #22c55e
      );
    }

    .edge-logo-inner {
      position: absolute;
      inset: 3px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #e0f2fe, #0ea5e9 40%, #1d4ed8 75%);
      clip-path: polygon(0% 40%, 40% 15%, 95% 40%, 80% 80%, 20% 100%);
    }

    .browser-bar {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 6px;
    }

    .tab-strip {
      display: flex;
      gap: 4px;
      font-size: 11px;
    }

    .tab {
      padding: 2px 6px;
      border-radius: 6px 6px 0 0;
      background: #e5e7eb;
      border: 1px solid #cbd5e1;
      border-bottom: none;
      cursor: pointer;
      max-width: 120px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .tab.active {
      background: #ffffff;
      border-color: #93c5fd;
      font-weight: 600;
    }

    .tab-new {
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px solid #cbd5e1;
      background: #e5e7eb;
      cursor: pointer;
      margin-left: 4px;
    }

    .browser-row {
      display: flex;
      gap: 6px;
    }

    .browser-input {
      flex: 1;
      border-radius: 12px;
      border: 1px solid #93c5fd;
      padding: 4px 9px;
      font-size: 12px;
      outline: none;
      background: #ffffff;
      color: #111827;
    }

    .browser-go {
      padding: 4px 12px;
      border-radius: 12px;
      border: 1px solid #2563eb;
      background: linear-gradient(to bottom, #60a5fa, #2563eb);
      color: #f9fafb;
      font-size: 11px;
      cursor: pointer;
    }

    .browser-go:hover {
      background: linear-gradient(to bottom, #93c5fd, #2563eb);
    }

    .browser-frame {
      width: 100%;
      height: 310px;
      border-radius: 4px;
      border: 1px solid #9ca3af;
      background: #ffffff;
    }

    .browser-status {
      margin-top: 4px;
      font-size: 11px;
      opacity: 0.8;
    }

    /* Minesweeper */

    .mines-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      font-size: 12px;
    }

    .mines-counter {
      padding: 2px 6px;
      border-radius: 4px;
      background: #111827;
      color: #f97373;
      font-family: "Consolas", ui-monospace, monospace;
      min-width: 40px;
      text-align: right;
    }

    .mines-reset {
      padding: 1px 6px;
      border-radius: 4px;
      border: 1px solid #9ca3af;
      background: #e5e7eb;
      cursor: pointer;
      font-size: 18px;
      line-height: 18px;
    }

    .mines-grid {
      display: grid;
      grid-template-columns: repeat(8, 24px);
      grid-template-rows: repeat(8, 24px);
      gap: 1px;
      margin-top: 4px;
      background: #6b7280;
      padding: 2px;
      border-radius: 4px;
      width: fit-content;
      margin-left: auto;
      margin-right: auto;
    }

    .mine-cell {
      width: 24px;
      height: 24px;
      border-radius: 2px;
      border: 1px solid #9ca3af;
      background: linear-gradient(145deg, #d1d5db, #e5e7eb);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      cursor: pointer;
      font-family: "Consolas", ui-monospace, monospace;
    }

    .mine-cell.revealed {
      background: #f9fafb;
      border: 1px solid #cbd5e1;
      box-shadow: inset 0 0 1px rgba(148, 163, 184, 0.9);
      cursor: default;
    }

    .mine-cell.mine {
      background: #fecaca;
    }

    .mine-cell.flag {
      color: #b91c1c;
    }

    .mine-num-1 { color: #1d4ed8; }
    .mine-num-2 { color: #16a34a; }
    .mine-num-3 { color: #b91c1c; }
    .mine-num-4 { color: #1e40af; }
    .mine-num-5 { color: #92400e; }
    .mine-num-6 { color: #0f766e; }
    .mine-num-7 { color: #111827; }
    .mine-num-8 { color: #4b5563; }

    .mines-status {
      margin-top: 6px;
      font-size: 12px;
      text-align: center;
      min-height: 16px;
    }

    /* Pinball */

    .pinball-layout {
      display: flex;
      gap: 8px;
      height: 100%;
    }

    .pinball-field-wrapper {
      flex: 0 0 180px;
      display: flex;
      justify-content: center;
    }

    .pinball-field {
      margin-top: 2px;
      width: 180px;
      height: 320px;
      border-radius: 16px;
      border: 1px solid #7da2d7;
      background: radial-gradient(circle at top, #1e293b, #020617);
      position: relative;
      overflow: hidden;
      box-shadow:
        inset 0 0 18px rgba(15, 23, 42, 0.9),
        0 10px 18px rgba(15, 23, 42, 0.9);
    }

    .pinball-ball {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #f9fafb, #9ca3af);
      box-shadow:
        0 0 10px rgba(248, 250, 252, 0.9),
        0 6px 10px rgba(15, 23, 42, 0.9);
      position: absolute;
      left: 80px;
      top: 40px;
    }

    .pinball-bumper {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #22c55e, #15803d);
      position: absolute;
      box-shadow: 0 0 14px rgba(34, 197, 94, 0.9);
      opacity: 0.9;
    }

    .pinball-flipper {
      width: 60px;
      height: 12px;
      border-radius: 16px;
      background: linear-gradient(145deg, #ef4444, #b91c1c);
      position: absolute;
      bottom: 20px;
      transform-origin: 10% 50%;
      box-shadow:
        0 0 10px rgba(239, 68, 68, 0.9),
        0 4px 10px rgba(15, 23, 42, 0.9);
    }

    .pinball-flipper.right {
      right: 35px;
      transform-origin: 90% 50%;
    }

    .pinball-flipper.left {
      left: 35px;
    }

    .pinball-side {
      flex: 1;
      font-size: 12px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      gap: 6px;
    }

    .pinball-score-box {
      border-radius: 6px;
      border: 1px solid #cbd5e1;
      padding: 6px;
      background: #f1f5f9;
      font-family: "Consolas", ui-monospace, monospace;
    }

    /* Paint */

    .paint-toolbar {
      display: flex;
      gap: 6px;
      margin-bottom: 6px;
      font-size: 12px;
      align-items: center;
    }

    .paint-color {
      width: 18px;
      height: 18px;
      border-radius: 4px;
      border: 1px solid #9ca3af;
      cursor: pointer;
    }

    .paint-canvas {
      border-radius: 4px;
      border: 1px solid #cbd5e1;
      background: #ffffff;
      box-shadow: inset 0 0 4px rgba(148, 163, 184, 0.8);
    }

    /* Settings */

    .settings-list {
      font-size: 13px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .settings-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .settings-toggle {
      cursor: pointer;
    }

    /* File Explorer */

    .explorer-layout {
      display: flex;
      height: 100%;
      gap: 8px;
    }

    .explorer-sidebar {
      width: 120px;
      border-right: 1px solid #cbd5e1;
      padding-right: 6px;
      font-size: 12px;
    }

    .explorer-sidebar-item {
      padding: 4px 6px;
      border-radius: 4px;
      cursor: pointer;
    }

    .explorer-sidebar-item.active {
      background: #dbeafe;
      border: 1px solid #93c5fd;
    }

    .explorer-main {
      flex: 1;
      font-size: 12px;
      display: flex;
      flex-direction: column;
    }

    .explorer-toolbar {
      margin-bottom: 4px;
      display: flex;
      justify-content: space-between;
    }

    .explorer-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      font-size: 11px;
      margin-top: 4px;
    }

    .explorer-item {
      text-align: center;
      cursor: pointer;
    }

    .explorer-item-icon {
      width: 40px;
      height: 40px;
      margin: 0 auto 4px;
      border-radius: 8px;
      background: linear-gradient(145deg, #bfdbfe, #93c5fd);
      border: 1px solid #60a5fa;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .explorer-path {
      font-size: 11px;
      opacity: 0.7;
    }

    /* Calculator */

    .calc-display {
      width: 100%;
      height: 40px;
      border-radius: 4px;
      border: 1px solid #cbd5e1;
      margin-bottom: 6px;
      padding: 4px 8px;
      font-size: 16px;
      font-family: "Consolas", ui-monospace, monospace;
      text-align: right;
      background: #f9fafb;
    }

    .calc-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 4px;
    }

    .calc-btn {
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #cbd5e1;
      background: #e5e7eb;
      cursor: pointer;
      text-align: center;
      font-size: 14px;
    }

    .calc-btn.op {
      background: #bfdbfe;
    }

    .calc-btn.eq {
      background: #22c55e;
      color: #f9fafb;
      border-color: #15803d;
    }

    .calc-btn.clr {
      background: #fecaca;
      border-color: #b91c1c;
    }

    /* System */

    .sys-list {
      font-size: 13px;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <!-- Hills background -->
  <div class="hill-layer hill-back"></div>
  <div class="hill-layer hill-front"></div>

  <!-- Boot screen -->
  <div id="bootScreen">
    <div class="boot-logo">
      <div class="boot-logo-grid">
        <div class="boot-pane tl"></div>
        <div class="boot-pane tr"></div>
        <div class="boot-pane bl"></div>
        <div class="boot-pane br"></div>
      </div>
    </div>
    <div class="boot-title">PaneOS</div>
    <div class="boot-sub">Sky Blue Glass ¬∑ Copilot in four panes</div>
    <div class="boot-sub2">Green hills, blue sky. Tiny OS, big plans.</div>
    <div class="boot-progress">
      <div class="boot-progress-bar"></div>
    </div>
  </div>

  <div class="desktop">
    <div class="desktop-overlay"></div>

    <!-- Icons on left side -->
    <div class="icon-column">
      <div class="desktop-icon" onclick="openWindow('explorerWindow')">
        <div class="desktop-icon-inner">üóÇ</div>
        <span>Explorer</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('browserWindow')">
        <div class="desktop-icon-inner">
          <div class="edge-logo">
            <div class="edge-logo-base"></div>
            <div class="edge-logo-inner"></div>
          </div>
        </div>
        <span>Edge</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('notesWindow')">
        <div class="desktop-icon-inner">‚úé</div>
        <span>Notes</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('minesWindow')">
        <div class="desktop-icon-inner">üí£</div>
        <span>Mines</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('pinballWindow')">
        <div class="desktop-icon-inner">üé±</div>
        <span>Pinball</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('paintWindow')">
        <div class="desktop-icon-inner">üñå</div>
        <span>Paint</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('calcWindow')">
        <div class="desktop-icon-inner">‚ûó</div>
        <span>Calc</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('mcWindow')">
        <div class="desktop-icon-inner">‚õè</div>
        <span>Minecraft</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('settingsWindow')">
        <div class="desktop-icon-inner">‚öô</div>
        <span>Settings</span>
      </div>
      <div class="desktop-icon" onclick="openWindow('systemWindow')">
        <div class="desktop-icon-inner">‚ìò</div>
        <span>System</span>
      </div>
    </div>

    <!-- File Explorer -->
    <div class="window" id="explorerWindow" style="top: 80px; left: 120px;">
      <div class="window-header" onmousedown="startDrag(event, 'explorerWindow')">
        <div class="window-header-title">
          <span>Explorer</span>
        </div>
        <div class="window-controls">
          <div class="window-btn" onclick="minimizeWindow(event, 'explorerWindow')">‚Äì</div>
          <div class="window-btn" onclick="maximizeWindow(event, 'explorerWindow')">‚ñ°</div>
          <div class="window-btn window-btn-close" onclick="closeWindow(event, 'explorerWindow')">X</div>
        </div>
      </div>
      <div class="window-content">
        <div class="explorer-layout">
          <div class="explorer-sidebar">
            <div class="explorer-sidebar-item active" onclick="selectExplorerFolder('Desktop')">Desktop</div>
            <div class="explorer-sidebar-item" onclick="selectExplorerFolder('Documents')">Documents</div>
            <div class="explorer-sidebar-item" onclick="selectExplorerFolder('Pictures')">Pictures</div>
            <div class="explorer-sidebar-item" onclick="selectExplorerFolder('Apps')">Apps</div>
          </div>
          <div class="explorer-main">
            <div class="explorer-toolbar">
              <div class="explorer-path" id="explorerPath">PaneOS:/Desktop</div>
              <button onclick="explorerNewFolder()">New Folder</button>
            </div>
            <div class="explorer-grid" id="explorerGrid"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Edge Browser -->
    <div class="window" id="browserWindow" style="top: 70px; left: 280px;">
      <div class="window-header" onmousedown="startDrag(event, 'browserWindow')">
        <div class="window-header-title">
          <div class="edge-logo">
            <div class="edge-logo-base"></div>
            <div class="edge-logo-inner"></div>
          </div>
          <span>Edge</span>
        </div>
        <div class="window-controls">
          <div class="window-btn" onclick="minimizeWindow(event, 'browserWindow')">‚Äì</div>
          <div class="window-btn" onclick="maximizeWindow(event, 'browserWindow')">‚ñ°</div>
          <div class="window-btn window-btn-close" onclick="closeWindow(event, 'browserWindow')">X</div>
        </div>
      </div>
      <div class="window-content">
        <div class="browser-bar">
          <div class="tab-strip" id="tabStrip"></div>
          <div class="browser-row">
            <input id="browserUrl" class="browser-input" placeholder="Search or type a URL" />
            <button class="browser-go" onclick="browserGo()">Go</button>
            <button class="tab-new" onclick="newTab()">+</button>
          </div>
        </div>
        <iframe id="browserFrame" class="browser-frame" src="about:blank"></iframe>
        <div class="browser-status" id="browserStatus">
          Edge inside PaneOS. Video searches and YouTube links go through piped.video. Some websites may still block embedding.
        </div>
      </div>
    </div>

    <!-- Notes -->
    <div class="window" id="notesWindow" style="top: 90px; left: 340px;">
      <div class="window-header" onmousedown="startDrag(event, 'notesWindow')">
        <div class="window-header-title">
          <span>Notes</span>
        </div>
        <div class="window-controls">
          <div class="window-btn" onclick="minimizeWindow(event, 'notesWindow')">‚Äì</div>
          <div class="window-btn" onclick="maximizeWindow(event, 'notesWindow')">‚ñ°</div>
          <div class="window-btn window-btn-close" onclick="closeWindow(event, 'notesWindow')">X</div>
        </div>
      </div>
      <div class="window-content">
        <textarea id="notesArea">PaneOS ‚Äì Sky Blue Edition.

You turned a single HTML file into a tiny OS.
Keep going.</textarea>
      </div>
    </div>

    <!-- Minesweeper -->
    <div class="window" id="minesWindow" style="top: 130px; left: 220px;">
      <div class="window-header" onmousedown="startDrag(event, 'minesWindow')">
        <div class="window-header-title">
          <span>Minesweeper</span>
        </div>
        <div class="window-controls">
          <div class="window-btn" onclick="minimizeWindow(event, 'minesWindow')">‚Äì</div>
          <div class="window-btn" onclick="maximizeWindow(event, 'minesWindow')">‚ñ°</div>
          <div class="window-btn window-btn-close" onclick="closeWindow(event, 'minesWindow')">X</div>
        </div>
      </div>
      <div class="window-content">
        <div class="mines-top">
          <div>Minesweeper ¬∑ Right-click = Flag</div>
          <div style="display:flex; align-items:center; gap:4px;">
            <span class="mines-counter" id="minesMines">010</span>
            <span class="mines-counter" id="minesTime">000</span>
            <button class="mines-reset" id="minesResetBtn" onclick="initMines()">üôÇ</button>
          </div>
        </div>
        <div class="mines-grid" id="minesGrid"></div>
        <div class="mines-status" id="minesStatus"></div>
      </div>
    </div>

    <!-- Pinball -->
    <div class="window" id="pinballWindow" style="top: 160px; left: 360px;">
      <div class="window-header" onmousedown="startDrag(event, 'pinballWindow')">
        <div class="window-header-title">
          <span>Pinball</span>
        </div>
        <div class="window-controls">
          <div class="window-btn" onclick="minimizeWindow(event, 'pinballWindow')">‚Äì</div>
          <div class="window-btn" onclick="maximizeWindow(event, 'pinballWindow')">‚ñ°</div>
          <div class="window-btn window-btn-close" onclick="closeWindow(event, 'pinballWindow')">X</div>
        </div>
      </div>
      <div class="window-content">
        <div class="pinball-layout">
          <div class="pinball-field-wrapper">
            <div class="pinball-field" id="pinballField">
              <div class="pinball-ball" id="pinballBall"></div>
              <div class="pinball-bumper" style="top: 40px; left: 20px;"></div>
              <div class="pinball-bumper" style="top: 40px; right: 20px;"></div>
              <div class="pinball-bumper" style="top: 95px; left: 60px;"></div>
              <div class="pinball-bumper" style="top: 95px; right: 60px;"></div>
              <div class="pinball-flipper left" id="flipperLeft"></div>
              <div class="pinball-flipper right" id="flipperRight"></div>
            </div>
          </div>
          <div class="pinball-side">
            <div>Controls: A / D for flippers</div>
            <div class="pinball-score-box">
              SCORE: <span id="pinballScore">0</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Paint -->
    <div class="window" id="paintWindow" style="top: 120px; left: 420px;">
      <div class="window-header" onmousedown="startDrag(event, 'paintWindow')">
        <div class="window-header-title">
          <span>Paint</span>
        </div>
        <div class="window-controls">
          <div class="window-btn" onclick="minimizeWindow(event, 'paintWindow')">‚Äì</div>
          <div class="window-btn" onclick="maximizeWindow(event, 'paintWindow')">‚ñ°</div>
          <div class="window-btn window-btn-close" onclick="closeWindow(event, 'paintWindow')">X</div>
        </div>
      </div>
      <div class="window-content">
        <div class="paint-toolbar">
          <span>Color:</span>
          <div class="paint-color" style="background:#000000;" onclick="setPaintColor('#000000')"></div>
          <div class="paint-color" style="background:#2563eb;" onclick="setPaintColor('#2563eb')"></div>
          <div class="paint-color" style="background:#22c55e;" onclick="setPaintColor('#22c55e')"></div>
          <div class="paint-color" style="background:#f97316;" onclick="setPaintColor('#f97316')"></div>
          <div class="paint-color" style="background:#ffffff;" onclick="setPaintColor('#ffffff')"></div>
          <span style="margin-left:10px;">Size:</span>
          <input id="paintSize" type="range" min="1" max="15" value="4" />
          <button onclick="clearPaint()">Clear</button>
        </div>
        <canvas id="paintCanvas" class="paint-canvas" width="440" height="260"></canvas>
      </div>
    </div>

    <!-- Calculator -->
    <div class="window" id="calcWindow" style="top: 100px; left: 500px;">
      <div class="window-header" onmousedown="startDrag(event, 'calcWindow')">
        <div class="window-header-title">
          <span>Calculator</span>
        </div>
        <div class="window-controls">
          <div class="window-btn" onclick="minimizeWindow(event, 'calcWindow')">‚Äì</div>
          <div class="window-btn" onclick="maximizeWindow(event, 'calcWindow')">‚ñ°</div>
          <div class="window-btn window-btn-close" onclick="closeWindow(event, 'calcWindow')">X</div>
        </div>
      </div>
      <div class="window-content">
        <input id="calcDisplay" class="calc-display" readonly />
        <div class="calc-grid">
          <div class="calc-btn clr" onclick="calcClear()">C</div>
          <div class="calc-btn" onclick="calcInput('(')">(</div>
          <div class="calc-btn" onclick="calcInput(')')">)</div>
          <div class="calc-btn op" onclick="calcInput('/')">/</div>

          <div class="calc-btn" onclick="calcInput('7')">7</div>
          <div class="calc-btn" onclick="calcInput('8')">8</div>
          <div class="calc-btn" onclick="calcInput('9')">9</div>
          <div class="calc-btn op" onclick="calcInput('*')">*</div>

          <div class="calc-btn" onclick="calcInput('4')">4</div>
          <div class="calc-btn" onclick="calcInput('5')">5</div>
          <div class="calc-btn" onclick="calcInput('6')">6</div>
          <div class="calc-btn op" onclick="calcInput('-')">-</div>

          <div class="calc-btn" onclick="calcInput('1')">1</div>
          <div class="calc-btn" onclick="calcInput('2')">2</div>
          <div class="calc-btn" onclick="calcInput('3')">3</div>
          <div class="calc-btn op" onclick="calcInput('+')">+</div>

          <div class="calc-btn" onclick="calcInput('0')">0</div>
          <div class="calc-btn" onclick="calcInput('.')">.</div>
          <div class="calc-btn" onclick="calcBack()">‚å´</div>
          <div class="calc-btn eq" onclick="calcEval()">=</div>
        </div>
      </div>
    </div>

    <!-- Minecraft (Eaglercraft) -->
    <div class="window" id="mcWindow" style="top: 80px; left: 160px;">
      <div class="window-header" onmousedown="startDrag(event, 'mcWindow')">
        <div class="window-header-title">
          <span>Minecraft (Eaglercraft)</span>
        </div>
        <div class="window-controls">
          <div class="window-btn" onclick="minimizeWindow(event, 'mcWindow')">‚Äì</div>
          <div class="window-btn" onclick="maximizeWindow(event, 'mcWindow')">‚ñ°</div>
          <div class="window-btn window-btn-close" onclick="closeWindow(event, 'mcWindow')">X</div>
        </div>
      </div>
      <div class="window-content">
        <iframe id="mcFrame"
                style="width:100%; height:100%; border:1px solid #9ca3af; border-radius:4px;"
                src="https://eaglercraft.app/web/">
        </iframe>
        <div style="font-size:11px; margin-top:4px; opacity:0.8;">
          If this ever breaks, edit this file and change the src to another working Eaglercraft mirror.
        </div>
      </div>
    </div>

    <!-- Settings -->
    <div class="window" id="settingsWindow" style="top: 200px; left: 260px;">
      <div class="window-header" onmousedown="startDrag(event, 'settingsWindow')">
        <div class="window-header-title">
          <span>Settings</span>
        </div>
        <div class="window-controls">
          <div class="window-btn" onclick="minimizeWindow(event, 'settingsWindow')">‚Äì</div>
          <div class="window-btn" onclick="maximizeWindow(event, 'settingsWindow')">‚ñ°</div>
          <div class="window-btn window-btn-close" onclick="closeWindow(event, 'settingsWindow')">X</div>
        </div>
      </div>
      <div class="window-content">
        <div class="settings-list">
          <div class="settings-item">
            <span>Theme hills:</span>
            <label class="settings-toggle">
              <input type="checkbox" id="toggleHills" checked onchange="toggleHills()"> Show
            </label>
          </div>
          <div class="settings-item">
            <span>Sounds:</span>
            <label class="settings-toggle">
              <input type="checkbox" id="toggleSound" checked> On
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- System info -->
    <div class="window" id="systemWindow" style="top: 210px; left: 380px;">
      <div class="window-header" onmousedown="startDrag(event, 'systemWindow')">
        <div class="window-header-title">
          <span>System</span>
        </div>
        <div class="window-controls">
          <div class="window-btn" onclick="minimizeWindow(event, 'systemWindow')">‚Äì</div>
          <div class="window-btn" onclick="maximizeWindow(event, 'systemWindow')">‚ñ°</div>
          <div class="window-btn window-btn-close" onclick="closeWindow(event, 'systemWindow')">X</div>
        </div>
      </div>
      <div class="window-content">
        <div class="sys-list">
          <div><strong>OS:</strong> PaneOS ‚Äì Sky Blue Edition v1.2</div>
          <div><strong>Browser:</strong> Edge (piped.video for videos)</div>
          <div><strong>Games:</strong> Minesweeper, Pinball, Minecraft (Eaglercraft /web)</div>
          <div><strong>Apps:</strong> Explorer, Edge, Notes, Paint, Calculator, Settings</div>
        </div>
      </div>
    </div>

    <!-- Taskbar -->
    <div class="taskbar">
      <div class="start-button" onclick="toggleStartMenu()">
        <div class="start-logo">
          <div class="start-pane tl"></div>
          <div class="start-pane tr"></div>
          <div class="start-pane bl"></div>
          <div class="start-pane br"></div>
        </div>
      </div>
      <div class="taskbar-info">PaneOS ¬∑ Sky Blue Glass ¬∑ v1.2</div>
    </div>

    <!-- Start menu -->
    <div id="startMenu" class="start-menu">
      <div class="start-header">
        <span>PaneOS</span>
      </div>
      <div class="start-items">
        <div class="start-item" onclick="openWindow('explorerWindow')">
          <div class="start-item-icon">üóÇ</div>
          <span>Explorer</span>
        </div>
        <div class="start-item" onclick="openWindow('browserWindow')">
          <div class="start-item-icon">e</div>
          <span>Edge</span>
        </div>
        <div class="start-item" onclick="openWindow('notesWindow')">
          <div class="start-item-icon">‚úé</div>
          <span>Notes</span>
        </div>
        <div class="start-item" onclick="openWindow('minesWindow')">
          <div class="start-item-icon">üí£</div>
          <span>Minesweeper</span>
        </div>
        <div class="start-item" onclick="openWindow('pinballWindow')">
          <div class="start-item-icon">üé±</div>
          <span>Pinball</span>
        </div>
        <div class="start-item" onclick="openWindow('paintWindow')">
          <div class="start-item-icon">üñå</div>
          <span>Paint</span>
        </div>
        <div class="start-item" onclick="openWindow('calcWindow')">
          <div class="start-item-icon">‚ûó</div>
          <span>Calculator</span>
        </div>
        <div class="start-item" onclick="openWindow('mcWindow')">
          <div class="start-item-icon">‚õè</div>
          <span>Minecraft</span>
        </div>
        <div class="start-item" onclick="openWindow('settingsWindow')">
          <div class="start-item-icon">‚öô</div>
          <span>Settings</span>
        </div>
        <div class="start-item" onclick="openWindow('systemWindow')">
          <div class="start-item-icon">‚ìò</div>
          <span>System Info</span>
        </div>
      </div>
      <div class="start-footer">
        <span>PaneOS</span>
        <span>v1.2</span>
      </div>
    </div>

  </div>

  <script>
    // Boot screen
    setTimeout(() => {
      document.getElementById('bootScreen').style.display = 'none';
    }, 2600);
    document.getElementById('bootScreen').addEventListener('click', () => {
      document.getElementById('bootScreen').style.display = 'none';
    });

    // Sound
    let audioCtx = null;
    function playBeep(freq = 440, duration = 0.08, type = 'square') {
      const soundOn = document.getElementById('toggleSound')?.checked ?? true;
      if (!soundOn) return;
      if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = type;
      osc.frequency.value = freq;
      gain.gain.value = 0.15;
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.start();
      osc.stop(audioCtx.currentTime + duration);
    }

    // z-index
    let topZ = 600;
    function bringToFront(id) {
      const win = document.getElementById(id);
      win.style.zIndex = ++topZ;
    }

    // Browser state
    let tabs = [];
    let activeTabIndex = -1;

    // Minesweeper state
    const minesRows = 8;
    const minesCols = 8;
    const minesCount = 10;
    let minesBoard = [];
    let minesRevealed = 0;
    let minesFlags = 0;
    let minesTimer = null;
    let minesTimeValue = 0;
    let minesAlive = true;

    // Pinball state
    let ballX = 80;
    let ballY = 40;
    let ballVX = 1.2;
    let ballVY = 0.8;
    let score = 0;
    let leftActive = false;
    let rightActive = false;
    let pinballActive = false;

    function openWindow(id) {
      const win = document.getElementById(id);
      win.style.display = 'flex';
      bringToFront(id);
      document.getElementById('startMenu').style.display = 'none';

      if (id === 'minesWindow') {
        initMines();
      }
      if (id === 'browserWindow') {
        if (tabs.length === 0) {
          newTab();
        }
      }
      if (id === 'mcWindow') {
        const frame = document.getElementById('mcFrame');
        if (!frame.src || frame.src === 'about:blank') {
          frame.src = 'https://eaglercraft.app/web/';
        }
      }
      if (id === 'pinballWindow') {
        pinballActive = true;
      }

      playBeep(880, 0.05, 'sine');
    }

    function closeWindow(event, id) {
      event.stopPropagation();
      const win = document.getElementById(id);
      win.style.display = 'none';

      if (id === 'browserWindow') {
        tabs = [];
        activeTabIndex = -1;
        renderTabs();
        const frame = document.getElementById('browserFrame');
        frame.src = 'about:blank';
        document.getElementById('browserUrl').value = '';
        document.getElementById('browserStatus').textContent =
          'Edge inside PaneOS. Video searches and YouTube links go through piped.video. Some websites may still block embedding.';
      }

      if (id === 'mcWindow') {
        const frame = document.getElementById('mcFrame');
        frame.src = 'about:blank';
      }

      if (id === 'minesWindow') {
        if (minesTimer) {
          clearInterval(minesTimer);
          minesTimer = null;
        }
      }

      if (id === 'pinballWindow') {
        pinballActive = false;
      }

      playBeep(220, 0.05, 'square');
    }

    function minimizeWindow(event, id) {
      event.stopPropagation();
      const win = document.getElementById(id);
      win.style.display = 'none';

      if (id === 'browserWindow') {
        const frame = document.getElementById('browserFrame');
        frame.src = 'about:blank';
      }

      if (id === 'mcWindow') {
        const frame = document.getElementById('mcFrame');
        frame.src = 'about:blank';
      }

      if (id === 'minesWindow') {
        if (minesTimer) {
          clearInterval(minesTimer);
          minesTimer = null;
        }
      }

      if (id === 'pinballWindow') {
        pinballActive = false;
      }

      playBeep(330, 0.04, 'sine');
    }

    function maximizeWindow(event, id) {
      event.stopPropagation();
      const win = document.getElementById(id);
      const isMax = win.dataset.maximized === 'true';

      if (!isMax) {
        win.dataset.prevLeft = win.style.left;
        win.dataset.prevTop = win.style.top;
        win.dataset.prevWidth = win.style.width;
        win.dataset.prevHeight = win.style.height;

        win.style.left = '0px';
        win.style.top = '0px';
        win.style.width = window.innerWidth + 'px';
        win.style.height = (window.innerHeight - 44) + 'px';
        win.dataset.maximized = 'true';
      } else {
        win.style.left = win.dataset.prevLeft || '100px';
        win.style.top = win.dataset.prevTop || '100px';
        win.style.width = win.dataset.prevWidth || '520px';
        win.style.height = win.dataset.prevHeight || '420px';
        win.dataset.maximized = 'false';
      }
      playBeep(600, 0.05, 'triangle');
    }

    // Start menu
    function toggleStartMenu() {
      const menu = document.getElementById('startMenu');
      menu.style.display = (menu.style.display === 'flex') ? 'none' : 'flex';
      playBeep(700, 0.04, 'sine');
    }

    document.addEventListener('click', (e) => {
      const menu = document.getElementById('startMenu');
      const startBtn = document.querySelector('.start-button');
      if (!menu.contains(e.target) && e.target !== startBtn && !startBtn.contains(e.target)) {
        if (menu.style.display === 'flex') {
          menu.style.display = 'none';
        }
      }
    });

    // Drag windows
    let dragState = null;

    function startDrag(e, id) {
      e.preventDefault();
      const win = document.getElementById(id);
      bringToFront(id);
      dragState = {
        id,
        offsetX: e.clientX - win.offsetLeft,
        offsetY: e.clientY - win.offsetTop
      };
      document.addEventListener('mousemove', onDrag);
      document.addEventListener('mouseup', stopDrag);
    }

    function onDrag(e) {
      if (!dragState) return;
      const win = document.getElementById(dragState.id);
      let x = e.clientX - dragState.offsetX;
      let y = e.clientY - dragState.offsetY;
      x = Math.max(0, Math.min(window.innerWidth - win.offsetWidth, x));
      y = Math.max(0, Math.min(window.innerHeight - 80 - win.offsetHeight, y));
      win.style.left = x + 'px';
      win.style.top = y + 'px';
    }

    function stopDrag() {
      dragState = null;
      document.removeEventListener('mousemove', onDrag);
      document.removeEventListener('mouseup', stopDrag);
    }

    // Edge tabs + Piped integration
    function newTab(url = 'about:blank', title = 'New tab') {
      tabs.push({ url, title });
      activeTabIndex = tabs.length - 1;
      renderTabs();
      loadActiveTab();
      playBeep(780, 0.04, 'sine');
    }

    function switchTab(index) {
      activeTabIndex = index;
      renderTabs();
      loadActiveTab();
      playBeep(650, 0.04, 'sine');
    }

    function renderTabs() {
      const strip = document.getElementById('tabStrip');
      strip.innerHTML = '';
      tabs.forEach((tab, i) => {
        const div = document.createElement('div');
        div.className = 'tab' + (i === activeTabIndex ? ' active' : '');
        div.textContent = tab.title || tab.url || 'Tab ' + (i + 1);
        div.onclick = () => switchTab(i);
        strip.appendChild(div);
      });
      if (tabs.length === 0) {
        activeTabIndex = -1;
      }
    }

    function loadActiveTab() {
      const frame = document.getElementById('browserFrame');
      const input = document.getElementById('browserUrl');
      if (activeTabIndex === -1) {
        frame.src = 'about:blank';
        input.value = '';
        return;
      }
      const tab = tabs[activeTabIndex];
      frame.src = tab.url;
      input.value = tab.url === 'about:blank' ? '' : tab.url;
    }

    function setActiveTabUrl(url, titleGuess) {
      if (activeTabIndex === -1) newTab(url, titleGuess);
      tabs[activeTabIndex].url = url;
      tabs[activeTabIndex].title = titleGuess || url;
      renderTabs();
      loadActiveTab();
    }

    function browserGo() {
      const input = document.getElementById('browserUrl');
      const status = document.getElementById('browserStatus');
      let text = input.value.trim();
      if (!text) return;

      let url = text;
      let title = text;

      const looksLikeUrl = /^https?:\/\//i.test(text) || /^[\w.-]+\.[a-z]{2,}/i.test(text);
      const looksLikeVideoSearch =
        /video|music|trailer|compilation|funny|yt\s|youtube|song|mix|live/i.test(text);

      if (!/^https?:\/\//i.test(text)) {
        if (looksLikeUrl) {
          url = 'https://' + text;
        } else if (looksLikeVideoSearch) {
          url = 'https://piped.video/search?q=' + encodeURIComponent(text);
          title = 'Piped: ' + text;
        } else {
          url = 'https://www.bing.com/search?q=' + encodeURIComponent(text);
          title = 'Bing: ' + text;
        }
      }

      // YouTube to Piped
      if (url.includes('youtube.com') || url.includes('youtu.be')) {
        url = url.replace('https://www.youtube.com/watch?v=', 'https://piped.video/watch?v=');
        url = url.replace('https://youtube.com/watch?v=', 'https://piped.video/watch?v=');
        url = url.replace('https://m.youtube.com/watch?v=', 'https://piped.video/watch?v=');
        url = url.replace('https://youtu.be/', 'https://piped.video/watch?v=');
        title = 'YouTube via Piped';
      }

      setActiveTabUrl(url, title);
      status.textContent =
        'Loading: ' + url + ' (if it says blocked, that site does not allow being inside an OS browser).';
      playBeep(900, 0.05, 'sine');
    }

    // Minesweeper
    function initMines() {
      const grid = document.getElementById('minesGrid');
      const status = document.getElementById('minesStatus');
      const face = document.getElementById('minesResetBtn');
      grid.innerHTML = '';
      status.textContent = '';
      face.textContent = 'üôÇ';

      minesBoard = [];
      minesRevealed = 0;
      minesFlags = 0;
      minesAlive = true;
      minesTimeValue = 0;

      document.getElementById('minesMines').textContent = String(minesCount).padStart(3, '0');
      document.getElementById('minesTime').textContent = '000';
      if (minesTimer) clearInterval(minesTimer);
      minesTimer = setInterval(() => {
        if (!minesAlive) return;
        minesTimeValue = Math.min(999, minesTimeValue + 1);
        document.getElementById('minesTime').textContent = String(minesTimeValue).padStart(3, '0');
      }, 1000);

      for (let r = 0; r < minesRows; r++) {
        const row = [];
        for (let c = 0; c < minesCols; c++) {
          row.push({
            mine: false,
            revealed: false,
            flagged: false,
            count: 0,
            element: null
          });
        }
        minesBoard.push(row);
      }

      let placed = 0;
      while (placed < minesCount) {
        const r = Math.floor(Math.random() * minesRows);
        const c = Math.floor(Math.random() * minesCols);
        if (!minesBoard[r][c].mine) {
          minesBoard[r][c].mine = true;
          placed++;
        }
      }

      for (let r = 0; r < minesRows; r++) {
        for (let c = 0; c < minesCols; c++) {
          if (minesBoard[r][c].mine) continue;
          let count = 0;
          for (let dr = -1; dr <= 1; dr++) {
            for (let dc = -1; dc <= 1; dc++) {
              if (!dr && !dc) continue;
              const nr = r + dr;
              const nc = c + dc;
              if (nr >= 0 && nr < minesRows && nc >= 0 && nc < minesCols) {
                if (minesBoard[nr][nc].mine) count++;
              }
            }
          }
          minesBoard[r][c].count = count;
        }
      }

      for (let r = 0; r < minesRows; r++) {
        for (let c = 0; c < minesCols; c++) {
          const cell = document.createElement('div');
          cell.className = 'mine-cell';
          cell.oncontextmenu = (e) => {
            e.preventDefault();
            toggleFlag(r, c);
          };
          cell.addEventListener('click', () => {
            revealCell(r, c);
          });
          grid.appendChild(cell);
          minesBoard[r][c].element = cell;
        }
      }
    }

    function toggleFlag(r, c) {
      if (!minesAlive) return;
      const cell = minesBoard[r][c];
      if (cell.revealed) return;
      cell.flagged = !cell.flagged;
      if (cell.flagged) {
        cell.element.classList.add('flag');
        cell.element.textContent = '‚öë';
        minesFlags++;
        playBeep(500, 0.04, 'triangle');
      } else {
        cell.element.classList.remove('flag');
        cell.element.textContent = '';
        minesFlags--;
        playBeep(400, 0.04, 'triangle');
      }
      const remaining = Math.max(0, minesCount - minesFlags);
      document.getElementById('minesMines').textContent = String(remaining).padStart(3, '0');
    }

    function revealCell(r, c) {
      if (!minesAlive) return;
      const cell = minesBoard[r][c];
      if (cell.revealed || cell.flagged) return;

      cell.revealed = true;
      cell.element.classList.add('revealed');

      if (cell.mine) {
        cell.element.classList.add('mine');
        cell.element.textContent = 'üí£';
        playBeep(150, 0.18, 'square');
        gameOverMines(false);
        return;
      }

      minesRevealed++;
      playBeep(650, 0.04, 'sine');

      if (cell.count > 0) {
        cell.element.textContent = cell.count;
        cell.element.classList.add('mine-num-' + cell.count);
      } else {
        cell.element.textContent = '';
        for (let dr = -1; dr <= 1; dr++) {
          for (let dc = -1; dc <= 1; dc++) {
            if (!dr && !dc) continue;
            const nr = r + dr;
            const nc = c + dc;
            if (nr >= 0 && nr < minesRows && nc >= 0 && nc < minesCols) {
              if (!minesBoard[nr][nc].revealed && !minesBoard[nr][nc].mine) {
                revealCell(nr, nc);
              }
            }
          }
        }
      }

      if (minesRevealed === minesRows * minesCols - minesCount) {
        gameOverMines(true);
      }
    }

    function gameOverMines(won) {
      minesAlive = false;
      if (minesTimer) clearInterval(minesTimer);
      minesTimer = null;
      const status = document.getElementById('minesStatus');
      const face = document.getElementById('minesResetBtn');

      if (!won) {
        for (let r = 0; r < minesRows; r++) {
          for (let c = 0; c < minesCols; c++) {
            const cell = minesBoard[r][c];
            if (cell.mine && !cell.revealed) {
              cell.element.classList.add('revealed', 'mine');
              cell.element.textContent = 'üí£';
            }
          }
        }
        status.textContent = 'Boom. You hit a mine.';
        face.textContent = 'üò¢';
      } else {
        status.textContent = 'You cleared the board. Nice.';
        face.textContent = 'üòé';
        playBeep(900, 0.1, 'triangle');
        setTimeout(() => playBeep(1100, 0.1, 'triangle'), 80);
      }
    }

    // Pinball
    function initPinball() {
      const field = document.getElementById('pinballField');
      const ball = document.getElementById('pinballBall');

      function loop() {
        if (!pinballActive) {
          requestAnimationFrame(loop);
          return;
        }

        const rect = field.getBoundingClientRect();
        const w = rect.width;
        const h = rect.height;

        ballVY += 0.12;
        ballX += ballVX;
        ballY += ballVY;

        if (ballX < 5) {
          ballX = 5;
          ballVX = Math.abs(ballVX);
        }
        if (ballX > w - 20) {
          ballX = w - 20;
          ballVX = -Math.abs(ballVX);
        }
        if (ballY < 5) {
          ballY = 5;
          ballVY = Math.abs(ballVY);
        }

        if (ballY > h - 10) {
          ballX = w / 2;
          ballY = 40;
          ballVX = (Math.random() * 2 - 1.0) * 1.8;
          ballVY = -3;
          score = 0;
          document.getElementById('pinballScore').textContent = score;
        }

        const bumpers = field.querySelectorAll('.pinball-bumper');
        bumpers.forEach(b => {
          const br = b.getBoundingClientRect();
          const cx = br.left - rect.left + br.width / 2;
          const cy = br.top - rect.top + br.height / 2;
          const dx = ballX - cx;
          const dy = ballY - cy;
          const dist = Math.sqrt(dx * dx + dy * dy);
          const radius = br.width / 2 + 10;
          if (dist < radius) {
            const nx = dx / (dist || 1);
            const ny = dy / (dist || 1);
            ballX = cx + nx * radius;
            ballY = cy + ny * radius;
            const dot = ballVX * nx + ballVY * ny;
            ballVX = ballVX - 2 * dot * nx;
            ballVY = ballVY - 2 * dot * ny;
            ballVX *= 1.05;
            ballVY *= 1.05;
            score += 10;
            document.getElementById('pinballScore').textContent = score;
            playBeep(750, 0.06, 'sine');
          }
        });

        const leftFlipper = document.getElementById('flipperLeft');
        const rightFlipper = document.getElementById('flipperRight');
        const lfRect = leftFlipper.getBoundingClientRect();
        const rfRect = rightFlipper.getBoundingClientRect();

        if (leftActive &&
            ballY > lfRect.top - rect.top - 20 &&
            ballY < lfRect.bottom - rect.top + 10 &&
            ballX > lfRect.left - rect.left - 10 &&
            ballX < lfRect.right - rect.left + 10) {
          ballVY = -Math.abs(ballVY) - 2.5;
          ballVX -= 1;
          score += 2;
          document.getElementById('pinballScore').textContent = score;
          playBeep(600, 0.05, 'triangle');
        }

        if (rightActive &&
            ballY > rfRect.top - rect.top - 20 &&
            ballY < rfRect.bottom - rect.top + 10 &&
            ballX > rfRect.left - rect.left - 10 &&
            ballX < rfRect.right - rect.left + 10) {
          ballVY = -Math.abs(ballVY) - 2.5;
          ballVX += 1;
          score += 2;
          document.getElementById('pinballScore').textContent = score;
          playBeep(600, 0.05, 'triangle');
        }

        ball.style.left = ballX + 'px';
        ball.style.top = ballY + 'px';

        requestAnimationFrame(loop);
      }

      requestAnimationFrame(loop);
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'a' || e.key === 'A') {
        leftActive = true;
        document.getElementById('flipperLeft').style.transform = 'rotate(-25deg)';
      }
      if (e.key === 'd' || e.key === 'D') {
        rightActive = true;
        document.getElementById('flipperRight').style.transform = 'rotate(25deg)';
      }
    });

    document.addEventListener('keyup', (e) => {
      if (e.key === 'a' || e.key === 'A') {
        leftActive = false;
        document.getElementById('flipperLeft').style.transform = 'rotate(0deg)';
      }
      if (e.key === 'd' || e.key === 'D') {
        rightActive = false;
        document.getElementById('flipperRight').style.transform = 'rotate(0deg)';
      }
    });

    // Paint
    let paintColor = '#000000';
    let paintDown = false;
    let lastX = 0;
    let lastY = 0;

    function setPaintColor(color) {
      paintColor = color;
      playBeep(700, 0.04, 'sine');
    }

    function clearPaint() {
      const canvas = document.getElementById('paintCanvas');
      const ctx = canvas.getContext('2d');
      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      playBeep(400, 0.05, 'square');
    }

    function initPaint() {
      const canvas = document.getElementById('paintCanvas');
      const ctx = canvas.getContext('2d');
      clearPaint();

      function getPos(e) {
        const rect = canvas.getBoundingClientRect();
        return {
          x: e.clientX - rect.left,
          y: e.clientY - rect.top
        };
      }

      canvas.addEventListener('mousedown', (e) => {
        paintDown = true;
        const pos = getPos(e);
        lastX = pos.x;
        lastY = pos.y;
      });

      canvas.addEventListener('mousemove', (e) => {
        if (!paintDown) return;
        const pos = getPos(e);
        const size = parseInt(document.getElementById('paintSize').value, 10) || 4;
        ctx.strokeStyle = paintColor;
        ctx.lineWidth = size;
        ctx.lineCap = 'round';
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(pos.x, pos.y);
        ctx.stroke();
        lastX = pos.x;
        lastY = pos.y;
      });

      canvas.addEventListener('mouseup', () => { paintDown = false; });
      canvas.addEventListener('mouseleave', () => { paintDown = false; });
    }

    // Settings toggles
    function toggleHills() {
      const checked = document.getElementById('toggleHills').checked;
      document.querySelector('.hill-back').style.display = checked ? 'block' : 'none';
      document.querySelector('.hill-front').style.display = checked ? 'block' : 'none';
      playBeep(500, 0.05, 'triangle');
    }

    // Calculator
    function calcClear() {
      document.getElementById('calcDisplay').value = '';
      playBeep(400, 0.05, 'square');
    }

    function calcInput(ch) {
      const d = document.getElementById('calcDisplay');
      d.value += ch;
      playBeep(700, 0.04, 'sine');
    }

    function calcBack() {
      const d = document.getElementById('calcDisplay');
      d.value = d.value.slice(0, -1);
      playBeep(500, 0.04, 'triangle');
    }

    function calcEval() {
      const d = document.getElementById('calcDisplay');
      try {
        const result = Function('"use strict";return (' + d.value + ')')();
        d.value = result;
        playBeep(900, 0.06, 'triangle');
      } catch {
        d.value = 'Error';
        playBeep(200, 0.1, 'square');
      }
    }

    // File Explorer
    const explorerFS = {
      Desktop: [
        { name: 'Notes.txt', icon: '‚úé', type: 'notes' },
        { name: 'Mines.lnk', icon: 'üí£', type: 'mines' },
        { name: 'Edge.lnk', icon: 'e', type: 'browser' },
        { name: 'Minecraft.lnk', icon: '‚õè', type: 'mc' },
      ],
      Documents: [
        { name: 'Ideas.txt', icon: 'üìÑ', type: 'notes' },
      ],
      Pictures: [
        { name: 'Wallpaper.png', icon: 'üñº', type: 'image' },
      ],
      Apps: [
        { name: 'Edge', icon: 'e', type: 'browser' },
        { name: 'Paint', icon: 'üñå', type: 'paint' },
        { name: 'Pinball', icon: 'üé±', type: 'pinball' },
        { name: 'Calc', icon: '‚ûó', type: 'calc' },
        { name: 'Minecraft', icon: '‚õè', type: 'mc' },
      ]
    };

    let currentExplorerFolder = 'Desktop';

    function renderExplorer() {
      const path = document.getElementById('explorerPath');
      const grid = document.getElementById('explorerGrid');
      path.textContent = 'PaneOS:/' + currentExplorerFolder;
      grid.innerHTML = '';

      const sidebarItems = document.querySelectorAll('.explorer-sidebar-item');
      sidebarItems.forEach(i => i.classList.remove('active'));
      sidebarItems.forEach(i => {
        if (i.textContent === currentExplorerFolder) i.classList.add('active');
      });

      const items = explorerFS[currentExplorerFolder] || [];
      items.forEach((item) => {
        const div = document.createElement('div');
        div.className = 'explorer-item';
        div.onclick = () => openExplorerItem(item);
        const icon = document.createElement('div');
        icon.className = 'explorer-item-icon';
        icon.textContent = item.icon;
        const label = document.createElement('div');
        label.textContent = item.name;
        div.appendChild(icon);
        div.appendChild(label);
        grid.appendChild(div);
      });
    }

    function selectExplorerFolder(name) {
      currentExplorerFolder = name;
      renderExplorer();
      playBeep(700, 0.05, 'sine');
    }

    function explorerNewFolder() {
      const name = 'New Folder';
      explorerFS[currentExplorerFolder] = explorerFS[currentExplorerFolder] || [];
      explorerFS[currentExplorerFolder].push({ name, icon: 'üìÅ', type: 'folder' });
      renderExplorer();
      playBeep(600, 0.05, 'triangle');
    }

    function openExplorerItem(item) {
      playBeep(800, 0.05, 'sine');
      if (item.type === 'notes') openWindow('notesWindow');
      if (item.type === 'browser') openWindow('browserWindow');
      if (item.type === 'paint') openWindow('paintWindow');
      if (item.type === 'pinball') openWindow('pinballWindow');
      if (item.type === 'mines') openWindow('minesWindow');
      if (item.type === 'calc') openWindow('calcWindow');
      if (item.type === 'mc') openWindow('mcWindow');
    }

    // Init on load
    window.addEventListener('load', () => {
      initMines();
      initPinball();
      initPaint();
      selectExplorerFolder('Desktop');
      newTab(); // one blank tab in Edge
    });
  </script>
</body>
</html>